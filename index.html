<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta http-equiv="Content-Style-Type" content="text/css">
  <title></title>
  <meta name="Generator" content="Cocoa HTML Writer">
  <meta name="CocoaVersion" content="2575.7">
  <style type="text/css">
    p.p1 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica}
    p.p2 {margin: 0.0px 0.0px 0.0px 0.0px; font: 12.0px Helvetica; min-height: 14.0px}
  </style>
</head>
<body>
<p class="p1">&lt;!doctype html&gt;</p>
<p class="p1">&lt;html lang="fr" class="h-full"&gt;</p>
<p class="p1"><span class="Apple-converted-space"> </span>&lt;head&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta charset="UTF-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;title&gt;Calculateur de Rémunération des Élus Municipaux&lt;/title&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="https://cdn.tailwindcss.com"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="/_sdk/element_sdk.js"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>body {</p>
<p class="p1"><span class="Apple-converted-space">      </span>box-sizing: border-box;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>:root {</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bleu-fonce: #111F49;</p>
<p class="p1"><span class="Apple-converted-space">      </span>--blanc: #FFFFFF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bleu-clair: #38B6FF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bleu-ciel: #F0F7FB;</p>
<p class="p1"><span class="Apple-converted-space">      </span>--bleu-ciel-2: #96DDF8;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.calculator-card {</p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: all 0.3s ease;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.calculator-card:hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>transform: translateY(-2px);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>.result-animation {</p>
<p class="p1"><span class="Apple-converted-space">      </span>animation: slideIn 0.5s ease-out;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>@keyframes slideIn {</p>
<p class="p1"><span class="Apple-converted-space">      </span>from {</p>
<p class="p1"><span class="Apple-converted-space">        </span>opacity: 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>transform: translateY(20px);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>to {</p>
<p class="p1"><span class="Apple-converted-space">        </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">        </span>transform: translateY(0);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.bg-primary { background-color: var(--bleu-fonce); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.bg-secondary { background-color: var(--bleu-clair); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.bg-light { background-color: var(--bleu-ciel); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.text-primary { color: var(--bleu-fonce); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.text-secondary { color: var(--bleu-clair); }</p>
<p class="p1"><span class="Apple-converted-space">    </span>.hover-secondary:hover { background-color: var(--bleu-clair); }</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.result-card {</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-left: 4px solid var(--bleu-clair);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.slider {</p>
<p class="p1"><span class="Apple-converted-space">      </span>-webkit-appearance: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>appearance: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 100%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 8px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 5px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #d3d3d3;</p>
<p class="p1"><span class="Apple-converted-space">      </span>outline: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 0.7;</p>
<p class="p1"><span class="Apple-converted-space">      </span>transition: opacity 0.2s;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.slider:hover {</p>
<p class="p1"><span class="Apple-converted-space">      </span>opacity: 1;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.slider::-webkit-slider-thumb {</p>
<p class="p1"><span class="Apple-converted-space">      </span>-webkit-appearance: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>appearance: none;</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #38B6FF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>.slider::-moz-range-thumb {</p>
<p class="p1"><span class="Apple-converted-space">      </span>width: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>height: 20px;</p>
<p class="p1"><span class="Apple-converted-space">      </span>border-radius: 50%;</p>
<p class="p1"><span class="Apple-converted-space">      </span>background: #38B6FF;</p>
<p class="p1"><span class="Apple-converted-space">      </span>cursor: pointer;</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;style&gt;@view-transition { navigation: auto; }&lt;/style&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script src="/_sdk/data_sdk.js" type="text/javascript"&gt;&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space"> </span>&lt;/head&gt;</p>
<p class="p1"><span class="Apple-converted-space"> </span>&lt;body class="h-full bg-light font-sans"&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;div class="max-w-4xl mx-auto px-4 py-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">   </span>&lt;section&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;div class="bg-white rounded-xl shadow-lg p-8 calculator-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;div class="mb-8"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;h2 id="main-title" class="text-3xl font-bold text-primary mb-4"&gt;Calculateur de Rémunération des Élus Municipaux&lt;/h2&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;p id="description-text" class="text-lg text-gray-600"&gt;Calculez les indemnités brutes mensuelles du maire et des adjoints selon la population de votre commune.&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;form onsubmit="calculateRemuneration(event)" class="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;div&gt;&lt;label for="population" class="block text-lg font-medium text-gray-700 mb-3"&gt; Population municipale (nombre d'habitants) &lt;/label&gt; &lt;input type="number" id="population" name="population" min="1" class="w-full px-6 py-4 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent" placeholder="Ex: 15000" required&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>&lt;/div&gt;&lt;button type="submit" id="submit-button" class="w-full bg-secondary text-white py-4 px-8 rounded-lg font-medium text-lg hover-secondary transition-colors"&gt; Calculer les indemnités &lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;/form&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;div id="advanced-mode-toggle" class="mt-4 text-center hidden"&gt;&lt;button id="toggle-advanced-btn" onclick="toggleAdvancedMode()" class="px-6 py-2 rounded-lg font-medium text-sm transition-all border-2 border-blue-400 text-blue-600 hover:bg-blue-50"&gt; Basculer vers le mode avancé &lt;/button&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">     </span>&lt;div id="result-remuneration" class="mt-8 hidden"&gt;&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">   </span>&lt;/section&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;script&gt;</p>
<p class="p1"><span class="Apple-converted-space">    </span>const defaultConfig = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>main_title: "Calculateur de Rémunération des Élus Municipaux",</p>
<p class="p1"><span class="Apple-converted-space">      </span>description_text: "Calculez les indemnités brutes mensuelles du maire et des adjoints selon la population de votre commune.",</p>
<p class="p1"><span class="Apple-converted-space">      </span>button_text: "Calculer les indemnités",</p>
<p class="p1"><span class="Apple-converted-space">      </span>background_color: "#F0F7FB",</p>
<p class="p1"><span class="Apple-converted-space">      </span>card_color: "#FFFFFF",</p>
<p class="p1"><span class="Apple-converted-space">      </span>primary_color: "#111F49",</p>
<p class="p1"><span class="Apple-converted-space">      </span>accent_color: "#38B6FF",</p>
<p class="p1"><span class="Apple-converted-space">      </span>text_color: "#4B5563",</p>
<p class="p1"><span class="Apple-converted-space">      </span>font_family: "system-ui",</p>
<p class="p1"><span class="Apple-converted-space">      </span>font_size: 16</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const remunerationData = {</p>
<p class="p1"><span class="Apple-converted-space">      </span>maire: [</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 499, taux: 25.5, montant: 1048.18 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 999, taux: 40.3, montant: 1656.54 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 3499, taux: 51.6, montant: 2121.03 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 9999, taux: 55, montant: 2260.79 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 19999, taux: 65, montant: 2671.84 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 49999, taux: 90, montant: 3699.47 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 99999, taux: 110, montant: 4521.58 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: Infinity, taux: 145, montant: 5960.26 }</p>
<p class="p1"><span class="Apple-converted-space">      </span>],</p>
<p class="p1"><span class="Apple-converted-space">      </span>adjoint: [</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 499, taux: 9.9, montant: 406.94 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 999, taux: 10.7, montant: 439.83 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 3499, taux: 19.8, montant: 813.88 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 9999, taux: 22, montant: 904.32 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 19999, taux: 27.5, montant: 1130.39 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 49999, taux: 33, montant: 1356.47 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 99999, taux: 44, montant: 1808.63 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: 199999, taux: 66, montant: 2712.95 },</p>
<p class="p1"><span class="Apple-converted-space">        </span>{ max: Infinity, taux: 72.5, montant: 2980.13 }</p>
<p class="p1"><span class="Apple-converted-space">      </span>]</p>
<p class="p1"><span class="Apple-converted-space">    </span>};</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const conseillersTranches = [</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 99, nb: 7 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 499, nb: 11 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 1499, nb: 15 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 2499, nb: 19 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 3499, nb: 23 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 4999, nb: 27 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 9999, nb: 29 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 19999, nb: 33 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 29999, nb: 35 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 39999, nb: 39 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 49999, nb: 43 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 59999, nb: 45 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 79999, nb: 49 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 99999, nb: 53 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 149999, nb: 55 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 199999, nb: 59 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 249999, nb: 61 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: 299999, nb: 65 },</p>
<p class="p1"><span class="Apple-converted-space">      </span>{ max: Infinity, nb: 69 }</p>
<p class="p1"><span class="Apple-converted-space">    </span>];</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>const indemniteConseiller = 246.63;</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>let advancedMode = false;</p>
<p class="p1"><span class="Apple-converted-space">    </span>let currentData = null;</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>function calculateRemuneration(event) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>event.preventDefault();</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const population = parseInt(document.getElementById('population').value);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul du nombre de conseillers</p>
<p class="p1"><span class="Apple-converted-space">      </span>let nbConseillers = 7;</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let tranche of conseillersTranches) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (population &lt;= tranche.max) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>nbConseillers = tranche.nb;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul du nombre maximum d'adjoints (30% tronqué)</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbMaxAdjoints = Math.floor(nbConseillers * 0.30);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul pour le maire</p>
<p class="p1"><span class="Apple-converted-space">      </span>const tranchesMaire = remunerationData.maire;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let resultMaire = null;</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let tranche of tranchesMaire) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (population &lt;= tranche.max) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>resultMaire = tranche;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul pour les adjoints</p>
<p class="p1"><span class="Apple-converted-space">      </span>const tranchesAdjoint = remunerationData.adjoint;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let resultAdjoint = null;</p>
<p class="p1"><span class="Apple-converted-space">      </span>for (let tranche of tranchesAdjoint) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (population &lt;= tranche.max) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>resultAdjoint = tranche;</p>
<p class="p1"><span class="Apple-converted-space">          </span>break;</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Indemnité des conseillers municipaux</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteConseillerMunicipal = population &gt;= 100000 ? indemniteConseiller : 0;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Stocker les données pour le mode avancé</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentData = {</p>
<p class="p1"><span class="Apple-converted-space">        </span>population: population,</p>
<p class="p1"><span class="Apple-converted-space">        </span>nbConseillers: nbConseillers,</p>
<p class="p1"><span class="Apple-converted-space">        </span>nbMaxAdjoints: nbMaxAdjoints,</p>
<p class="p1"><span class="Apple-converted-space">        </span>nbAdjointsActuel: nbMaxAdjoints,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteMaileLegale: resultMaire.montant,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteAdjointLegale: resultAdjoint.montant,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteConseillerLegale: indemniteConseillerMunicipal,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteMaileActuelle: resultMaire.montant,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteAdjointActuelle: resultAdjoint.montant,</p>
<p class="p1"><span class="Apple-converted-space">        </span>indemniteConseillerActuelle: indemniteConseillerMunicipal,</p>
<p class="p1"><span class="Apple-converted-space">        </span>majoration: 0,</p>
<p class="p1"><span class="Apple-converted-space">        </span>majorationType: null</p>
<p class="p1"><span class="Apple-converted-space">      </span>};</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Afficher le bouton mode avancé</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('advanced-mode-toggle').classList.remove('hidden');</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Réinitialiser le mode avancé</p>
<p class="p1"><span class="Apple-converted-space">      </span>advancedMode = false;</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('toggle-advanced-btn').textContent = 'Basculer vers le mode avancé';</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('toggle-advanced-btn').classList.remove('bg-blue-200', 'border-blue-600');</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.getElementById('toggle-advanced-btn').classList.add('border-blue-400', 'text-blue-600');</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>displayResults();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function toggleAdvancedMode() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>advancedMode = !advancedMode;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const btn = document.getElementById('toggle-advanced-btn');</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (advancedMode) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.textContent = 'Revenir au mode simple';</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.classList.remove('border-blue-400', 'text-blue-600');</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.classList.add('bg-blue-200', 'border-blue-600', 'text-blue-800');</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.textContent = 'Basculer vers le mode avancé';</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.classList.remove('bg-blue-200', 'border-blue-600', 'text-blue-800');</p>
<p class="p1"><span class="Apple-converted-space">        </span>btn.classList.add('border-blue-400', 'text-blue-600');</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>// Réinitialiser les valeurs</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.nbAdjointsActuel = currentData.nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.indemniteMaileActuelle = currentData.indemniteMaileLegale;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.indemniteAdjointActuelle = currentData.indemniteAdjointLegale;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.indemniteConseillerActuelle = currentData.indemniteConseillerLegale;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majoration = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majorationType = null;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>displayResults();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateNbAdjoints(value) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentData.nbAdjointsActuel = parseInt(value);</p>
<p class="p1"><span class="Apple-converted-space">      </span>recalculateAndUpdateDisplay();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateIndemniteMaile(value) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const newValue = parseFloat(value);</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentData.indemniteMaileActuelle = newValue;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Si l'indemnité du maire baisse, l'indemnité des adjoints ne peut pas être supérieure</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (currentData.indemniteAdjointActuelle &gt; currentData.indemniteMaileActuelle) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.indemniteAdjointActuelle = currentData.indemniteMaileActuelle;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>recalculateAndUpdateDisplay();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateIndemniteAdjoint(value) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const newValue = parseFloat(value);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calculer le maximum autorisé pour ne pas dépasser l'enveloppe</p>
<p class="p1"><span class="Apple-converted-space">      </span>const enveloppeMaximaleGlobale = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteAdjointLegale * currentData.nbMaxAdjoints) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteConseillerLegale * (currentData.nbConseillers - 1 - currentData.nbMaxAdjoints));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const espaceDisponiblePourAdjoints = enveloppeMaximaleGlobale - currentData.indemniteMaileActuelle -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                            </span>(currentData.indemniteConseillerActuelle * (currentData.nbConseillers - 1 - currentData.nbAdjointsActuel));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const maxParAdjoint = espaceDisponiblePourAdjoints / currentData.nbAdjointsActuel;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Limiter la valeur au maximum calculé</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentData.indemniteAdjointActuelle = Math.min(newValue, maxParAdjoint);</p>
<p class="p1"><span class="Apple-converted-space">      </span>recalculateAndUpdateDisplay();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateIndemniteConseiller(value) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const newValue = parseFloat(value);</p>
<p class="p1"><span class="Apple-converted-space">      </span>currentData.indemniteConseillerActuelle = newValue;</p>
<p class="p1"><span class="Apple-converted-space">      </span>recalculateAndUpdateDisplay();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function selectMajoration(type, percentage) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (currentData.majorationType === type) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majoration = 0;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majorationType = null;</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else {</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majoration = percentage;</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.majorationType = type;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>displayResults();</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function recalculateAndUpdateDisplay() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'enveloppe maximale globale</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbMaxAdjoints = currentData.nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbConseillersMunicipaux = currentData.nbConseillers - 1 - currentData.nbAdjointsActuel;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// L'enveloppe maximale = maire légal + adjoints max légaux + conseillers légaux</p>
<p class="p1"><span class="Apple-converted-space">      </span>const enveloppeMaximaleGlobale = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteAdjointLegale * nbMaxAdjoints) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteConseillerLegale * (currentData.nbConseillers - 1 - nbMaxAdjoints));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'espace disponible pour les conseillers</p>
<p class="p1"><span class="Apple-converted-space">      </span>const espaceDisponible = enveloppeMaximaleGlobale -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                               </span>(currentData.indemniteMaileActuelle + (currentData.indemniteAdjointActuelle * currentData.nbAdjointsActuel));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Maximum par conseiller = MIN(246.63€, espace disponible / nombre de conseillers)</p>
<p class="p1"><span class="Apple-converted-space">      </span>let maxParConseiller = 246.63;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (nbConseillersMunicipaux &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>maxParConseiller = Math.min(246.63, espaceDisponible / nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Limiter l'indemnité des conseillers au maximum calculé</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (currentData.indemniteConseillerActuelle &gt; maxParConseiller) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>currentData.indemniteConseillerActuelle = Math.max(0, maxParConseiller);</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Mise à jour sélective uniquement des valeurs affichées</p>
<p class="p1"><span class="Apple-converted-space">      </span>updateDisplayedValues(maxParConseiller, espaceDisponible);</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function updateDisplayedValues(maxParConseiller, espaceDisponible) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const population = currentData.population;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbAdjointsActuel = currentData.nbAdjointsActuel;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbConseillersMunicipaux = currentData.nbConseillers - 1 - nbAdjointsActuel;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const majCoef = 1 + (currentData.majoration / 100);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteMaileFinale = currentData.indemniteMaileActuelle * majCoef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteAdjointFinale = currentData.indemniteAdjointActuelle * majCoef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteConseillerFinale = currentData.indemniteConseillerActuelle * majCoef;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'enveloppe maximale</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbMaxAdjoints = currentData.nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">      </span>let enveloppeMaximale = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbMaxAdjoints);</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (population &gt;= 100000) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const nbConseillersMunicipauxMax = currentData.nbConseillers - 1 - nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">        </span>enveloppeMaximale += indemniteConseiller * nbConseillersMunicipauxMax;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>let budgetUtilise = indemniteMaileFinale + (indemniteAdjointFinale * nbAdjointsActuel);</p>
<p class="p1"><span class="Apple-converted-space">      </span>budgetUtilise += indemniteConseillerFinale * nbConseillersMunicipaux;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Mise à jour des valeurs affichées dans les curseurs</p>
<p class="p1"><span class="Apple-converted-space">      </span>const maireValueDisplay = document.querySelector('[data-display="maire-value"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (maireValueDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>maireValueDisplay.textContent = indemniteMaileFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const adjointValueDisplay = document.querySelector('[data-display="adjoint-value"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (adjointValueDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>adjointValueDisplay.textContent = indemniteAdjointFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calculer le maximum pour les adjoints sans dépasser l'enveloppe</p>
<p class="p1"><span class="Apple-converted-space">      </span>const enveloppeMaximaleGlobale = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteAdjointLegale * currentData.nbMaxAdjoints) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                        </span>(currentData.indemniteConseillerLegale * (currentData.nbConseillers - 1 - currentData.nbMaxAdjoints));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const espaceDisponiblePourAdjoints = enveloppeMaximaleGlobale - currentData.indemniteMaileActuelle -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                            </span>(currentData.indemniteConseillerActuelle * nbConseillersMunicipaux);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const maxParAdjoint = Math.min(currentData.indemniteMaileActuelle, espaceDisponiblePourAdjoints / nbAdjointsActuel);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const adjointMaxDisplay = document.querySelector('[data-display="adjoint-max"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (adjointMaxDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>adjointMaxDisplay.textContent = 'Max: ' + maxParAdjoint.toFixed(2) + ' €' + (maxParAdjoint &lt; currentData.indemniteMaileActuelle ? ' (limité par enveloppe)' : '');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const adjointSlider = document.querySelector('[data-slider="adjoint"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (adjointSlider) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>adjointSlider.max = maxParAdjoint;</p>
<p class="p1"><span class="Apple-converted-space">        </span>adjointSlider.value = currentData.indemniteAdjointActuelle;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbAdjointsDisplay = document.querySelector('[data-display="nb-adjoints"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (nbAdjointsDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>nbAdjointsDisplay.textContent = nbAdjointsActuel;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const conseillerValueDisplay = document.querySelector('[data-display="conseiller-value"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (conseillerValueDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerValueDisplay.textContent = indemniteConseillerFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerValueDisplay.className = `font-bold text-lg ${indemniteConseillerFinale === 0 ? 'text-gray-400' : 'text-blue-900'}`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const conseillerNbDisplay = document.querySelector('[data-display="conseiller-nb"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (conseillerNbDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerNbDisplay.textContent = `Conseiller municipal (${nbConseillersMunicipaux})`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const conseillerMaxDisplay = document.querySelector('[data-display="conseiller-max"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (conseillerMaxDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerMaxDisplay.textContent = 'Max: ' + maxParConseiller.toFixed(2) + ' € ' + (maxParConseiller &lt; 246.63 ? '(limité par enveloppe)' : '');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const conseillerSlider = document.querySelector('[data-slider="conseiller"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (conseillerSlider) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerSlider.max = maxParConseiller;</p>
<p class="p1"><span class="Apple-converted-space">        </span>conseillerSlider.value = currentData.indemniteConseillerActuelle;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const espaceDispoDisplay = document.querySelector('[data-display="espace-dispo"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (espaceDispoDisplay &amp;&amp; espaceDisponible &gt; 0 &amp;&amp; population &lt; 100000) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>espaceDispoDisplay.textContent = `Espace disponible dans l'enveloppe : ${espaceDisponible.toFixed(2)} €`;</p>
<p class="p1"><span class="Apple-converted-space">        </span>espaceDispoDisplay.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>} else if (espaceDispoDisplay) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>espaceDispoDisplay.classList.add('hidden');</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Mise à jour du budget total</p>
<p class="p1"><span class="Apple-converted-space">      </span>const budgetSansMAj = budgetUtilise / majCoef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const budgetUtiliseElem = document.querySelector('[data-display="budget-utilise"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (budgetUtiliseElem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>budgetUtiliseElem.textContent = budgetSansMAj.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const majorationElem = document.querySelector('[data-display="majoration"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (majorationElem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const majorationMontant = budgetUtilise - budgetSansMAj;</p>
<p class="p1"><span class="Apple-converted-space">        </span>majorationElem.textContent = (majorationMontant &gt; 0 ? '+' : '') + majorationMontant.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const budgetTotalElem = document.querySelector('[data-display="budget-total"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (budgetTotalElem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>budgetTotalElem.textContent = budgetUtilise.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const budgetAnnuelElem = document.querySelector('[data-display="budget-annuel"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (budgetAnnuelElem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>budgetAnnuelElem.textContent = 'Coût annuel pour la commune : ' + (budgetUtilise * 12).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'enveloppe effective</p>
<p class="p1"><span class="Apple-converted-space">      </span>const enveloppeEffective = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>(currentData.indemniteAdjointLegale * nbAdjointsActuel) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                  </span>(currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Mise à jour de l'enveloppe effective affichée</p>
<p class="p1"><span class="Apple-converted-space">      </span>const enveloppeEffectiveElem = document.querySelector('[data-display="enveloppe-effective"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (enveloppeEffectiveElem) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>enveloppeEffectiveElem.textContent = enveloppeEffective.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Mise à jour des dépenses au-delà de l'enveloppe</p>
<p class="p1"><span class="Apple-converted-space">      </span>const depassementContainer = document.querySelector('[data-display="depassement-container"]');</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (depassementContainer) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const difference = budgetUtilise - enveloppeEffective;</p>
<p class="p1"><span class="Apple-converted-space">        </span>const isEconomie = difference &lt;= 0;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>depassementContainer.className = `mt-4 p-3 ${isEconomie ? 'bg-green-50' : 'bg-red-50'} rounded-lg border-t pt-4`;</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const depassementLabel = document.querySelector('[data-display="depassement-label"]');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (depassementLabel) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementLabel.className = `text-sm font-medium ${isEconomie ? 'text-green-800' : 'text-red-800'}`;</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementLabel.textContent = isEconomie ? 'Économie sur l\'enveloppe :' : 'Dépenses hors enveloppe :';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const depassementMontant = document.querySelector('[data-display="depassement-montant"]');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (depassementMontant) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementMontant.className = `text-lg font-bold ${isEconomie ? 'text-green-700' : 'text-red-700'}`;</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementMontant.textContent = (isEconomie ? '-' : '+') + Math.abs(difference).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 }) + ' €';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p2"><span class="Apple-converted-space">        </span></p>
<p class="p1"><span class="Apple-converted-space">        </span>const depassementDesc = document.querySelector('[data-display="depassement-desc"]');</p>
<p class="p1"><span class="Apple-converted-space">        </span>if (depassementDesc) {</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementDesc.className = `text-xs ${isEconomie ? 'text-green-600' : 'text-red-600'} mt-1`;</p>
<p class="p1"><span class="Apple-converted-space">          </span>depassementDesc.textContent = isEconomie ? 'Économie mensuelle' : 'Dépassement mensuel';</p>
<p class="p1"><span class="Apple-converted-space">        </span>}</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><span class="Apple-converted-space">    </span></p>
<p class="p1"><span class="Apple-converted-space">    </span>function displayResults() {</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (!currentData) return;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const population = currentData.population;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbConseillers = currentData.nbConseillers;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbMaxAdjoints = currentData.nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbAdjointsActuel = currentData.nbAdjointsActuel;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbConseillersMunicipaux = nbConseillers - 1 - nbAdjointsActuel;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'enveloppe maximale</p>
<p class="p1"><span class="Apple-converted-space">      </span>let enveloppeMaximale = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbMaxAdjoints);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>if (population &gt;= 100000) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>const nbConseillersMunicipauxMax = nbConseillers - 1 - nbMaxAdjoints;</p>
<p class="p1"><span class="Apple-converted-space">        </span>enveloppeMaximale += indemniteConseiller * nbConseillersMunicipauxMax;</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul de l'espace disponible pour les conseillers</p>
<p class="p1"><span class="Apple-converted-space">      </span>const espaceDisponible = enveloppeMaximale -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                               </span>(currentData.indemniteMaileActuelle + (currentData.indemniteAdjointActuelle * nbAdjointsActuel));</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Maximum par conseiller</p>
<p class="p1"><span class="Apple-converted-space">      </span>let maxParConseiller = 246.63;</p>
<p class="p1"><span class="Apple-converted-space">      </span>if (nbConseillersMunicipaux &gt; 0) {</p>
<p class="p1"><span class="Apple-converted-space">        </span>maxParConseiller = Math.min(246.63, Math.max(0, espaceDisponible / nbConseillersMunicipaux));</p>
<p class="p1"><span class="Apple-converted-space">      </span>}</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>// Calcul du budget utilisé (avec majorations)</p>
<p class="p1"><span class="Apple-converted-space">      </span>const majCoef = 1 + (currentData.majoration / 100);</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteMaileFinale = currentData.indemniteMaileActuelle * majCoef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteAdjointFinale = currentData.indemniteAdjointActuelle * majCoef;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const indemniteConseillerFinale = currentData.indemniteConseillerActuelle * majCoef;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>let budgetUtilise = indemniteMaileFinale + (indemniteAdjointFinale * nbAdjointsActuel);</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const nbConseillersMunicipauxFinal = nbConseillers - 1 - nbAdjointsActuel;</p>
<p class="p1"><span class="Apple-converted-space">      </span>budgetUtilise += indemniteConseillerFinale * nbConseillersMunicipauxFinal;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const resultDiv = document.getElementById('result-remuneration');</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.innerHTML = `</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;div class="result-animation space-y-6"&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- Onglet 1: Informations de la commune --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 result-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-semibold text-blue-900 mb-4"&gt;Informations de la commune&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="grid grid-cols-1 md:grid-cols-3 gap-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="bg-white rounded-lg p-4 shadow-sm text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-600 mb-1"&gt;Population&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-2xl font-bold text-blue-900"&gt;${population.toLocaleString()}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">              </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="bg-white rounded-lg p-4 shadow-sm text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-600 mb-1"&gt;Conseillers municipaux&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-2xl font-bold text-blue-900"&gt;${nbConseillers}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">              </span></p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="bg-white rounded-lg p-4 shadow-sm text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-sm text-gray-600 mb-1"&gt;Adjoints maximum&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;p class="text-2xl font-bold text-blue-900"&gt;${nbMaxAdjoints}&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- Onglet 2: Enveloppe maximale --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 result-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-semibold text-blue-900 mb-4"&gt;Enveloppe maximale du conseil municipal&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white rounded-lg p-6 shadow-sm text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p class="text-2xl font-bold text-blue-900 mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>${enveloppeMaximale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p class="text-sm text-gray-600 mb-1"&gt;Montant total mensuel des indemnités légales&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;p class="text-xs text-gray-500"&gt;(${(enveloppeMaximale * 12).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} € annuel)&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- Onglet 3: Indemnités --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="bg-blue-50 border-l-4 border-blue-500 rounded-lg p-6 result-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-semibold text-blue-900 mb-4"&gt;Indemnités brutes mensuelles${currentData.majoration &gt; 0 ? ' (avec majoration)' : ''}&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white rounded-lg p-6 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>${!advancedMode ? `</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;!-- Mode simple : affichage en liste --&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Maire --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="border-b pb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;Maire&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold text-blue-900 text-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteMaileFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Adjoints --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="border-b pb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;Adjoint au maire&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold text-blue-900 text-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteAdjointFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Conseillers --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;Conseiller municipal&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="text-right"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span class="font-bold ${indemniteConseillerFinale === 0 ? 'text-gray-400' : 'text-blue-900'} text-lg"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>${indemniteConseillerFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteConseillerFinale === 0 &amp;&amp; population &lt; 100000 ? '&lt;div class="text-xs text-gray-500 mt-1"&gt;Indemnité possible si baisse du maire ou des adjoints&lt;/div&gt;' : ''}</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>` : `</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;!-- Mode avancé : affichage avec curseurs --&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="space-y-6"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Maire --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="border-b pb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;Maire&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold text-blue-900 text-lg" data-display="maire-value"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteMaileFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="mt-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="range" min="0" max="${currentData.indemniteMaileLegale}" step="0.01"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>value="${currentData.indemniteMaileActuelle}"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>class="slider" data-slider="maire" oninput="updateIndemniteMaile(this.value)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between text-xs text-gray-500 mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;0 €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;Max: ${currentData.indemniteMaileLegale.toFixed(2)} €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Adjoints --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="border-b pb-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium"&gt;Adjoint au maire&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold text-blue-900 text-lg" data-display="adjoint-value"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteAdjointFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="mt-3 space-y-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;label class="block text-xs text-gray-600 mb-1"&gt;Nombre d'adjoints : &lt;span class="font-bold" data-display="nb-adjoints"&gt;${nbAdjointsActuel}&lt;/span&gt;&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;input type="range" min="1" max="${nbMaxAdjoints}" value="${nbAdjointsActuel}"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>class="slider" data-slider="nb-adjoints" oninput="updateNbAdjoints(this.value)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div class="flex justify-between text-xs text-gray-500 mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span&gt;1&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span&gt;${nbMaxAdjoints}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;label class="block text-xs text-gray-600 mb-1"&gt;Indemnité par adjoint&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;input type="range" min="0" max="${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const enveloppeMax = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                             </span>(currentData.indemniteAdjointLegale * currentData.nbMaxAdjoints) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                             </span>(currentData.indemniteConseillerLegale * (currentData.nbConseillers - 1 - currentData.nbMaxAdjoints));</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const espaceAdjoint = enveloppeMax - currentData.indemniteMaileActuelle -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                              </span>(currentData.indemniteConseillerActuelle * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return Math.min(currentData.indemniteMaileActuelle, espaceAdjoint / nbAdjointsActuel);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>})()}" step="0.01"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>value="${currentData.indemniteAdjointActuelle}"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                        </span>class="slider" data-slider="adjoint" oninput="updateIndemniteAdjoint(this.value)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;div class="flex justify-between text-xs text-gray-500 mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span&gt;0 €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                        </span>&lt;span data-display="adjoint-max"&gt;Max: ${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                          </span>const enveloppeMax = currentData.indemniteMaileLegale +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                               </span>(currentData.indemniteAdjointLegale * currentData.nbMaxAdjoints) +<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                               </span>(currentData.indemniteConseillerLegale * (currentData.nbConseillers - 1 - currentData.nbMaxAdjoints));</p>
<p class="p1"><span class="Apple-converted-space">                          </span>const espaceAdjoint = enveloppeMax - currentData.indemniteMaileActuelle -<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                                                </span>(currentData.indemniteConseillerActuelle * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                          </span>const maxAdj = Math.min(currentData.indemniteMaileActuelle, espaceAdjoint / nbAdjointsActuel);</p>
<p class="p1"><span class="Apple-converted-space">                          </span>return maxAdj.toFixed(2) + ' €' + (maxAdj &lt; currentData.indemniteMaileActuelle ? ' (limité par enveloppe)' : '');</p>
<p class="p1"><span class="Apple-converted-space">                        </span>})()}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;!-- Conseillers --&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center mb-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-gray-800 font-medium" data-display="conseiller-nb"&gt;Conseiller municipal (${nbConseillersMunicipaux})&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="font-bold ${indemniteConseillerFinale === 0 ? 'text-gray-400' : 'text-blue-900'} text-lg" data-display="conseiller-value"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${indemniteConseillerFinale.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="mt-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="range" min="0" max="${maxParConseiller}" step="0.01"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>value="${currentData.indemniteConseillerActuelle}"<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>class="slider" data-slider="conseiller" oninput="updateIndemniteConseiller(this.value)"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;div class="flex justify-between text-xs text-gray-500 mt-1"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span&gt;0 €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>&lt;span data-display="conseiller-max"&gt;Max: ${maxParConseiller.toFixed(2)} € ${maxParConseiller &lt; 246.63 ? '(limité par enveloppe)' : ''}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;p class="text-xs text-green-600 mt-2 ${espaceDisponible &gt; 0 &amp;&amp; population &lt; 100000 ? '' : 'hidden'}" data-display="espace-dispo"&gt;Espace disponible dans l'enveloppe : ${espaceDisponible.toFixed(2)} €&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>`}</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>${advancedMode ? `</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- Onglet 4: Paramètres avancés --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="bg-yellow-50 border-l-4 border-yellow-500 rounded-lg p-6 result-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-semibold text-yellow-900 mb-4"&gt;Paramètres avancés&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;!-- Majorations --&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="bg-white rounded-lg p-4 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;label class="block text-sm font-medium text-gray-700 mb-3"&gt;Majorations (hors enveloppe)&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="space-y-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label class="flex items-center cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" ${currentData.majorationType === 'dept' ? 'checked' : ''}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>onchange="selectMajoration('dept', 25)" class="mr-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-sm"&gt;Chef-lieu de département (+25%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label class="flex items-center cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" ${currentData.majorationType === 'arrond' ? 'checked' : ''}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>onchange="selectMajoration('arrond', 20)" class="mr-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-sm"&gt;Chef-lieu d'arrondissement (+20%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label class="flex items-center cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" ${currentData.majorationType === 'canton' ? 'checked' : ''}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>onchange="selectMajoration('canton', 15)" class="mr-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-sm"&gt;Chef-lieu de canton (+15%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;label class="flex items-center cursor-pointer"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;input type="checkbox" ${currentData.majorationType === 'tourisme' ? 'checked' : ''}<span class="Apple-converted-space"> </span></p>
<p class="p1"><span class="Apple-converted-space">                      </span>onchange="selectMajoration('tourisme', ${population &lt; 5000 ? 50 : 25})" class="mr-2"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-sm"&gt;Commune station de tourisme (+${population &lt; 5000 ? 50 : 25}%)&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/label&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">          </span></p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;!-- Onglet 5: Budget total --&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;div class="bg-green-50 border-l-4 border-green-500 rounded-lg p-6 result-card"&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;h3 class="text-xl font-semibold text-green-900 mb-4"&gt;Budget total de fonctionnement&lt;/h3&gt;</p>
<p class="p2"><span class="Apple-converted-space">            </span></p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;div class="bg-white rounded-lg p-6 shadow-sm"&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;div class="space-y-4"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-center border-b pb-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="text-gray-700"&gt;Enveloppe effective&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="font-semibold text-gray-900" data-display="enveloppe-effective"&gt;${(currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux)).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-center border-b pb-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="text-gray-700"&gt;Enveloppe utilisée&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="font-semibold text-gray-900" data-display="budget-utilise"&gt;${(budgetUtilise / majCoef).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-center border-b pb-3"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="text-gray-700"&gt;Majorations${currentData.majoration &gt; 0 ? ` (+${currentData.majoration}%)` : ''}&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="font-semibold ${currentData.majoration &gt; 0 ? 'text-green-700' : 'text-gray-900'}" data-display="majoration"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>${currentData.majoration &gt; 0 ? '+' : ''}${(budgetUtilise - (budgetUtilise / majCoef)).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="flex justify-between items-center pt-2 border-t"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="text-lg font-bold text-gray-900"&gt;Budget total mensuel&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;span class="text-2xl font-bold text-green-700" data-display="budget-total"&gt;${budgetUtilise.toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="text-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;p class="text-xs text-gray-500" data-display="budget-annuel"&gt;Coût annuel pour la commune : ${(budgetUtilise * 12).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 })} €&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p2"><span class="Apple-converted-space">                </span></p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;div class="mt-4 p-3 ${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                  </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                  </span>return budgetUtilise &lt;= enveloppeEffective ? 'bg-green-50' : 'bg-red-50';</p>
<p class="p1"><span class="Apple-converted-space">                </span>})()} rounded-lg border-t pt-4" data-display="depassement-container"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;div class="flex justify-between items-center"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-sm font-medium ${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>return budgetUtilise &lt;= enveloppeEffective ? 'text-green-800' : 'text-red-800';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})()} " data-display="depassement-label"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return budgetUtilise &lt;= enveloppeEffective ? 'Économie sur l\'enveloppe' : 'Dépenses hors enveloppe';</p>
<p class="p1"><span class="Apple-converted-space">                      </span>})()} :</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;span class="text-lg font-bold ${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>return budgetUtilise &lt;= enveloppeEffective ? 'text-green-700' : 'text-red-700';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})()} " data-display="depassement-montant"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                      </span>${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                        </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                        </span>return (budgetUtilise &lt;= enveloppeEffective ? '-' : '+') + Math.abs(budgetUtilise - enveloppeEffective).toLocaleString('fr-FR', { minimumFractionDigits: 2, maximumFractionDigits: 2 });</p>
<p class="p1"><span class="Apple-converted-space">                      </span>})()} €</p>
<p class="p1"><span class="Apple-converted-space">                    </span>&lt;/span&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;p class="text-xs ${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                    </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                    </span>return budgetUtilise &lt;= enveloppeEffective ? 'text-green-600' : 'text-red-600';</p>
<p class="p1"><span class="Apple-converted-space">                  </span>})()} mt-1" data-display="depassement-desc"&gt;</p>
<p class="p1"><span class="Apple-converted-space">                    </span>${(() =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                      </span>const enveloppeEffective = currentData.indemniteMaileLegale + (currentData.indemniteAdjointLegale * nbAdjointsActuel) + (currentData.indemniteConseillerLegale * nbConseillersMunicipaux);</p>
<p class="p1"><span class="Apple-converted-space">                      </span>return budgetUtilise &lt;= enveloppeEffective ? 'Économie mensuelle' : 'Dépassement mensuel';</p>
<p class="p1"><span class="Apple-converted-space">                    </span>})()}</p>
<p class="p1"><span class="Apple-converted-space">                  </span>&lt;/p&gt;</p>
<p class="p1"><span class="Apple-converted-space">                </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">              </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">            </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">          </span>` : ''}</p>
<p class="p1"><span class="Apple-converted-space">        </span>&lt;/div&gt;</p>
<p class="p1"><span class="Apple-converted-space">      </span>`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>resultDiv.classList.remove('hidden');</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>async function onConfigChange(config) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>const customFont = config.font_family || defaultConfig.font_family;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const baseSize = config.font_size || defaultConfig.font_size;</p>
<p class="p1"><span class="Apple-converted-space">      </span>const baseFontStack = 'system-ui, -apple-system, sans-serif';</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.style.fontFamily = `${customFont}, ${baseFontStack}`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>document.body.style.backgroundColor = config.background_color || defaultConfig.background_color;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const mainTitle = document.getElementById('main-title');</p>
<p class="p1"><span class="Apple-converted-space">      </span>mainTitle.textContent = config.main_title || defaultConfig.main_title;</p>
<p class="p1"><span class="Apple-converted-space">      </span>mainTitle.style.color = config.primary_color || defaultConfig.primary_color;</p>
<p class="p1"><span class="Apple-converted-space">      </span>mainTitle.style.fontSize = `${baseSize * 1.875}px`;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const description = document.getElementById('description-text');</p>
<p class="p1"><span class="Apple-converted-space">      </span>description.textContent = config.description_text || defaultConfig.description_text;</p>
<p class="p1"><span class="Apple-converted-space">      </span>description.style.color = config.text_color || defaultConfig.text_color;</p>
<p class="p1"><span class="Apple-converted-space">      </span>description.style.fontSize = `${baseSize * 1.125}px`;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const button = document.getElementById('submit-button');</p>
<p class="p1"><span class="Apple-converted-space">      </span>button.textContent = config.button_text || defaultConfig.button_text;</p>
<p class="p1"><span class="Apple-converted-space">      </span>button.style.backgroundColor = config.accent_color || defaultConfig.accent_color;</p>
<p class="p1"><span class="Apple-converted-space">      </span>button.style.fontSize = `${baseSize * 1.125}px`;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const card = document.querySelector('.calculator-card');</p>
<p class="p1"><span class="Apple-converted-space">      </span>card.style.backgroundColor = config.card_color || defaultConfig.card_color;</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const labels = document.querySelectorAll('label');</p>
<p class="p1"><span class="Apple-converted-space">      </span>labels.forEach(label =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>label.style.color = config.primary_color || defaultConfig.primary_color;</p>
<p class="p1"><span class="Apple-converted-space">        </span>label.style.fontSize = `${baseSize * 1.125}px`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p2"><span class="Apple-converted-space">      </span></p>
<p class="p1"><span class="Apple-converted-space">      </span>const inputs = document.querySelectorAll('input, select');</p>
<p class="p1"><span class="Apple-converted-space">      </span>inputs.forEach(input =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">        </span>input.style.fontSize = `${baseSize * 1.125}px`;</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p2"><br></p>
<p class="p1"><span class="Apple-converted-space">    </span>if (window.elementSdk) {</p>
<p class="p1"><span class="Apple-converted-space">      </span>window.elementSdk.init({</p>
<p class="p1"><span class="Apple-converted-space">        </span>defaultConfig,</p>
<p class="p1"><span class="Apple-converted-space">        </span>onConfigChange,</p>
<p class="p1"><span class="Apple-converted-space">        </span>mapToCapabilities: (config) =&gt; ({</p>
<p class="p1"><span class="Apple-converted-space">          </span>recolorables: [</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">              </span>get: () =&gt; config.background_color || defaultConfig.background_color,</p>
<p class="p1"><span class="Apple-converted-space">              </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>config.background_color = value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.elementSdk.setConfig({ background_color: value });</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">              </span>get: () =&gt; config.card_color || defaultConfig.card_color,</p>
<p class="p1"><span class="Apple-converted-space">              </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>config.card_color = value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.elementSdk.setConfig({ card_color: value });</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">              </span>get: () =&gt; config.primary_color || defaultConfig.primary_color,</p>
<p class="p1"><span class="Apple-converted-space">              </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>config.primary_color = value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.elementSdk.setConfig({ primary_color: value });</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">              </span>get: () =&gt; config.accent_color || defaultConfig.accent_color,</p>
<p class="p1"><span class="Apple-converted-space">              </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>config.accent_color = value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.elementSdk.setConfig({ accent_color: value });</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>},</p>
<p class="p1"><span class="Apple-converted-space">            </span>{</p>
<p class="p1"><span class="Apple-converted-space">              </span>get: () =&gt; config.text_color || defaultConfig.text_color,</p>
<p class="p1"><span class="Apple-converted-space">              </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">                </span>config.text_color = value;</p>
<p class="p1"><span class="Apple-converted-space">                </span>window.elementSdk.setConfig({ text_color: value });</p>
<p class="p1"><span class="Apple-converted-space">              </span>}</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">          </span>],</p>
<p class="p1"><span class="Apple-converted-space">          </span>borderables: [],</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontEditable: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>get: () =&gt; config.font_family || defaultConfig.font_family,</p>
<p class="p1"><span class="Apple-converted-space">            </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>config.font_family = value;</p>
<p class="p1"><span class="Apple-converted-space">              </span>window.elementSdk.setConfig({ font_family: value });</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">          </span>},</p>
<p class="p1"><span class="Apple-converted-space">          </span>fontSizeable: {</p>
<p class="p1"><span class="Apple-converted-space">            </span>get: () =&gt; config.font_size || defaultConfig.font_size,</p>
<p class="p1"><span class="Apple-converted-space">            </span>set: (value) =&gt; {</p>
<p class="p1"><span class="Apple-converted-space">              </span>config.font_size = value;</p>
<p class="p1"><span class="Apple-converted-space">              </span>window.elementSdk.setConfig({ font_size: value });</p>
<p class="p1"><span class="Apple-converted-space">            </span>}</p>
<p class="p1"><span class="Apple-converted-space">          </span>}</p>
<p class="p1"><span class="Apple-converted-space">        </span>}),</p>
<p class="p1"><span class="Apple-converted-space">        </span>mapToEditPanelValues: (config) =&gt; new Map([</p>
<p class="p1"><span class="Apple-converted-space">          </span>["main_title", config.main_title || defaultConfig.main_title],</p>
<p class="p1"><span class="Apple-converted-space">          </span>["description_text", config.description_text || defaultConfig.description_text],</p>
<p class="p1"><span class="Apple-converted-space">          </span>["button_text", config.button_text || defaultConfig.button_text]</p>
<p class="p1"><span class="Apple-converted-space">        </span>])</p>
<p class="p1"><span class="Apple-converted-space">      </span>});</p>
<p class="p1"><span class="Apple-converted-space">    </span>}</p>
<p class="p1"><span class="Apple-converted-space">  </span>&lt;/script&gt;</p>
<p class="p1"><span class="Apple-converted-space"> </span>&lt;script&gt;(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'99d576fc8630d71a',t:'MTc2Mjk0NDU4OC4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&amp;&amp;(document.onreadystatechange=e,c())}}}})();&lt;/script&gt;&lt;/body&gt;</p>
<p class="p1">&lt;/html&gt;</p>
</body>
</html>
